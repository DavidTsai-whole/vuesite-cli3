(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0180d0ce"],{"049f":function(t,a,e){"use strict";e("22ca")},"1a43":function(t,a,e){},"1dde":function(t,a,e){var r=e("d039"),s=e("b622"),c=e("2d00"),i=s("species");t.exports=function(t){return c>=51||!r((function(){var a=[],e=a.constructor={};return e[i]=function(){return{foo:1}},1!==a[t](Boolean).foo}))}},"22ca":function(t,a,e){},8418:function(t,a,e){"use strict";var r=e("c04e"),s=e("9bf2"),c=e("5c6c");t.exports=function(t,a,e){var i=r(a);i in t?s.f(t,i,c(0,e)):t[i]=e}},"91b6":function(t,a,e){"use strict";e("1a43")},"99af":function(t,a,e){"use strict";var r=e("23e7"),s=e("d039"),c=e("e8b5"),i=e("861d"),n=e("7b0b"),o=e("50c4"),l=e("8418"),u=e("65f0"),f=e("1dde"),d=e("b622"),h=e("2d00"),g=d("isConcatSpreadable"),v=9007199254740991,p="Maximum allowed index exceeded",m=h>=51||!s((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),C=f("concat"),_=function(t){if(!i(t))return!1;var a=t[g];return void 0!==a?!!a:c(t)},b=!m||!C;r({target:"Array",proto:!0,forced:b},{concat:function(t){var a,e,r,s,c,i=n(this),f=u(i,0),d=0;for(a=-1,r=arguments.length;a<r;a++)if(c=-1===a?i:arguments[a],_(c)){if(s=o(c.length),d+s>v)throw TypeError(p);for(e=0;e<s;e++,d++)e in c&&l(f,d,c[e])}else{if(d>=v)throw TypeError(p);l(f,d++,c)}return f.length=d,f}})},a434:function(t,a,e){"use strict";var r=e("23e7"),s=e("23cb"),c=e("a691"),i=e("50c4"),n=e("7b0b"),o=e("65f0"),l=e("8418"),u=e("1dde"),f=e("ae40"),d=u("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,v=Math.min,p=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!h},{splice:function(t,a){var e,r,u,f,d,h,C=n(this),_=i(C.length),b=s(t,_),x=arguments.length;if(0===x?e=r=0:1===x?(e=0,r=_-b):(e=x-2,r=v(g(c(a),0),_-b)),_+e-r>p)throw TypeError(m);for(u=o(C,r),f=0;f<r;f++)d=b+f,d in C&&l(u,f,C[d]);if(u.length=r,e<r){for(f=b;f<_-r;f++)d=f+r,h=f+e,d in C?C[h]=C[d]:delete C[h];for(f=_;f>_-r+e;f--)delete C[f-1]}else if(e>r)for(f=_-r;f>b;f--)d=f+r-1,h=f+e-1,d in C?C[h]=C[d]:delete C[h];for(f=0;f<e;f++)C[f+b]=arguments[f+2];return C.length=_-r+e,u}})},a882:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cartlogo"},[t._m(0),0!==t.cartNum?e("span",{staticClass:"number d-flex align-items-center justify-content-center text-white"},[t._v(t._s(t.cartNum))]):t._e()])},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"logocart d-flex align-items-center justify-content-center",attrs:{href:"#/cart"}},[e("i",{staticClass:"fas fa-shopping-cart fa-2x text-white"})])}],c={data:function(){return{cartData:[],cartNum:0}},methods:{number:function(){var t=this;t.cartNum=t.cartData.length}},created:function(){var t=this;t.cartData=JSON.parse(localStorage.getItem("cartData"))||[],t.cartNum=t.cartData.length,t.$bus.$on("number",(function(){t.cartData=JSON.parse(localStorage.getItem("cartData"))||[],t.number()}))}},i=c,n=(e("91b6"),e("2877")),o=Object(n["a"])(i,r,s,!1,null,null,null);a["a"]=o.exports},b789:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("CartLogo"),e("div",{staticClass:"container"},[e("div",{staticClass:"row justify-content-center mt-2"},[e("div",{staticClass:"col-md-8"},[t._m(0),t.cartData.length>0?e("table",{staticClass:"cartTable table mt-5 table-borderless bg-dark1"},[t._m(1),e("tbody",t._l(t.cartData,(function(a){return e("tr",{key:a.id,staticClass:"borderBot"},[e("td",{staticClass:"text-center pt-4"},[t._v(t._s(a.title))]),e("td",{staticClass:"text-center"},[e("img",{staticClass:"cartImg",attrs:{src:""+a.imageUrl,alt:""}})]),e("td",{staticClass:"text-center pt-4"},[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[e("button",{staticClass:"btn btn-light btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.lessQty(a)}}},[t._v(" - ")]),e("button",{staticClass:"btn btn-outline-light btn-sm",attrs:{disabled:""}},[t._v(" "+t._s(a.qty)+" ")]),e("button",{staticClass:"btn btn-light btn-sm",attrs:{type:"button"},on:{click:function(e){return t.addQty(a)}}},[t._v(" + ")])])]),e("td",{staticClass:"text-center pt-4"},[t._v(t._s(a.price))]),e("td",{staticClass:"text-center pt-4"},[e("i",{staticClass:"far fa-trash-alt text-danger",on:{click:function(e){return t.deleteCart(a)}}})])])})),0),e("tfoot",[e("tr",[t.totoaPrice>=1e3?e("td",{staticClass:"text-right text-white free",attrs:{colspan:"5"}},[t._v(" (滿1000免運) ")]):t._e()]),e("tr",[e("td",{staticClass:"text-right free",attrs:{colspan:"4"}},[t._v("小計:")]),e("td",{staticClass:"text-right free"},[t._v("$"+t._s(t.totoaPrice))])]),e("tr",{staticClass:"tableBorder"},[e("td",{staticClass:"text-right free",attrs:{colspan:"4"}},[t._v("運費:")]),t.totoaPrice>=1e3?e("td",{staticClass:"text-right free"},[t._v("$0")]):e("td",{staticClass:"text-right free"},[t._v("$60")])]),e("tr",[e("td",{staticClass:"text-right totalPrice",attrs:{colspan:"4"}},[t._v("總計:")]),t.totoaPrice>=1e3?e("td",{staticClass:"totalPrice text-right"},[t._v("$"+t._s(t.totoaPrice))]):e("td",{staticClass:"totalPrice text-right"},[t._v("$"+t._s(t.totoaPrice+60))])])])]):e("div",{staticClass:"text-center mt-5 text-danger font-weight-bold"},[e("h2",{staticClass:"noMerch font-weight-bold"},[t._v("您目前並沒有選擇任何商品喔!")]),t._m(2)]),t.totoaPrice>0?e("div",{staticClass:"mt-5"},[e("div",{staticClass:"d-flex justify-content-around mt-5"},[t._m(3),e("a",{staticClass:"h3 cartin font-weight-bold",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.goCheckout(a)}}},[e("i",{staticClass:"fas fa-arrow-circle-right"}),t._v("結帳")])])]):t._e()])])])],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"list-unstyled d-flex justify-content-around"},[e("li",{staticClass:"topLogo1 d-flex align-items-center justify-content-center bg-dark1"},[t._v(" 購物車 ")]),e("li",[e("i",{staticClass:"fas fa-arrow-right text-danger ml-2 mr-2"})]),e("li",{staticClass:"topLogo2 d-flex align-items-center justify-content-center"},[t._v(" 結帳 ")]),e("li",[e("i",{staticClass:"fas fa-arrow-right text-danger ml-2 mr-2"})]),e("li",{staticClass:"topLogo2 d-flex align-items-center justify-content-center"},[t._v(" 訂單完成 ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"smth bg-dark"},[e("th",{staticClass:"text-center"},[t._v("品名")]),e("th",{staticClass:"text-center"},[t._v("圖片")]),e("th",{staticClass:"text-center"},[t._v("數量")]),e("th",{staticClass:"text-center",attrs:{width:"14%"}},[t._v("價錢")]),e("th",{staticClass:"text-center"},[t._v("刪除")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"link d-flex justify-content-around mb-5"},[e("a",{staticClass:"h3 cartin font-weight-bold",attrs:{href:"#/"}},[e("i",{staticClass:"fas fa-home"}),t._v("回首頁")]),e("a",{staticClass:"h3 cartin font-weight-bold",attrs:{href:"#/product"}},[e("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("前往購物")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"h3 cartin font-weight-bold",attrs:{href:"#/product"}},[e("i",{staticClass:"fas fa-arrow-circle-left"}),t._v("繼續購物")])}],c=(e("99af"),e("4160"),e("a434"),e("159b"),e("a882")),i={components:{CartLogo:c["a"]},data:function(){return{isLoading:!1,allcart:[],cartData:JSON.parse(localStorage.getItem("cartData"))||[],totoaPrice:0}},methods:{getCartData:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("asdsadas","/cart");t.$http.get(a).then((function(a){t.allcart=a.data.data.carts,console.log(t.allcart)}))},deleteCartData:function(t){var a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("asdsadas","/cart/").concat(t);a.$http.delete(e).then((function(t){}))},getTotalPr:function(){var t=this;t.totoaPrice=0,t.cartData.forEach((function(a){t.totoaPrice+=a.price*a.qty}))},addQty:function(t){var a=this;t.qty+=1,localStorage.setItem("cartData",JSON.stringify(a.cartData)),a.getTotalPr(),a.$bus.$emit("message:push","已更新商品數量","light")},lessQty:function(t){var a=this;t.qty-=1,localStorage.setItem("cartData",JSON.stringify(a.cartData)),a.getTotalPr(),0===t.qty?(a.deleteCart(t),localStorage.setItem("cartData",JSON.stringify(a.cartData))):a.$bus.$emit("message:push","已更新商品數量","light")},deleteCart:function(t){var a=this;a.cartData.forEach((function(e,r){t.product_id===e.product_id&&a.cartData.splice(r,1),localStorage.setItem("cartData",JSON.stringify(a.cartData)),a.getTotalPr()})),a.allcart.forEach((function(e,r){t.product_id===e.product_id&&(a.deleteCartData(e.id),console.log(e.id))})),a.getCartData(),a.$bus.$emit("number"),a.$bus.$emit("message:push","已移除該商品","light")},goCheckout:function(){var t=this;t.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("asdsadas","/cart");t.cartData.forEach((function(e){var r={product_id:e.product_id,qty:e.qty};t.$http.post(a,{data:r}).then((function(){t.isLoading=!1}))})),t.allcart.forEach((function(a){t.cartData.forEach((function(e){a.product_id===e.product_id&&t.deleteCartData(a.id)}))})),setTimeout((function(){t.$router.push("/checkout")}),2e3)}},created:function(){this.getTotalPr(),this.getCartData()}},n=i,o=(e("049f"),e("2877")),l=Object(o["a"])(n,r,s,!1,null,null,null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-0180d0ce.c01c3fb9.js.map